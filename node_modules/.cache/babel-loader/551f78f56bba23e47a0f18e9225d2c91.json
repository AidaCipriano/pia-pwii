{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\PWII\\\\PWII-PROYECTOFINAL\\\\PWII-PROYECTOFINAL\\\\PWII\\\\pia-pwii\\\\src\\\\pages\\\\MiPerfil.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Navigation from '../Components/NavigationLayout';\nimport './Test.css';\nimport { collection, query, where, getDocs, serverTimestamp, updateDoc, Timestamp } from \"firebase/firestore\";\nimport { arrayUnion, arrayRemove, getDoc } from \"firebase/firestore\";\nimport { doc, onSnapshot } from \"firebase/firestore\";\nimport { useState, useEffect } from \"react\";\nimport { ref, uploadBytes, getDownloadURL, listAll, list } from \"firebase/storage\";\nimport { storage } from \"../firebase\";\nimport { v4 } from \"uuid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MiPerfil = () => {\n  _s();\n\n  const [imageUpload, setImageUpload] = useState(null);\n  const [imageUrls, setImageUrls] = useState([]);\n  const imagesListRef = ref(storage, \"images/\");\n\n  const uploadFile = () => {\n    if (imageUpload == null) return;\n    const imageRef = ref(storage, `images/${imageUpload.name + v4()}`);\n    uploadBytes(imageRef, imageUpload).then(snapshot => {\n      getDownloadURL(snapshot.ref).then(url => {\n        setImageUrls(prev => [...prev, url]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    listAll(imagesListRef).then(response => {\n      response.items.forEach(item => {\n        getDownloadURL(item).then(url => {\n          setImageUrls(prev => [...prev, url]);\n        });\n      });\n    });\n  }, []);\n  uploadFile.on(error => {//TODO:Handle Error\n  }, () => {\n    getDownloadURL(uploadFile.snapshot.ref).then(async downloadURL => {\n      await updateDoc(doc(db, \"chats\", data.chatId), {\n        messages: arrayUnion({\n          id: uuid(),\n          text: text,\n          senderId: currentUser.uid,\n          date: Timestamp.now(),\n          displayName: currentUser.displayName,\n          img: downloadURL\n        })\n      });\n    });\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center\",\n          children: \"Agregar Productos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 1\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nombre: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Ingresa el nombre del producto\",\n              id: \"nombre\",\n              className: \"form-control mt-1\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Precio: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Ingresa el precio\",\n              id: \"precio\",\n              className: \"form-control mt-1\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 5\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Agregar Imagen: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            onChange: event => {\n              setImageUpload(event.target.files[0]);\n            },\n            className: \"form-control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary mt-3 form-control\",\n            onClick: uploadFile,\n            children: \" Upload Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this), imageUrls.map(url => {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        src: url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 8\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MiPerfil, \"HuzKbxPMeWzezQAAjY76BDVKkII=\");\n\n_c = MiPerfil;\nexport default MiPerfil;\n/*\n\n <div>\n              <Navigation />\n              <Container> \n              <div className='card card-body'>\n          <h3 className='text-center'>Agregar Productos</h3>\n          <form /*onSubmit={uploadFile} >\n          <label>Nombre: </label>\n          <div className='form-group'>\n              <input type=\"text\" placeholder='Ingresa el nombre del producto' id='nombre' className='form-control mt-1' required />\n          </div>\n\n          <label>Precio: </label>\n          <div className='form-group'>\n              <input type=\"text\" placeholder='Ingresa el precio' id='precio' className='form-control mt-1' required />\n          </div>\n        <label>Agregar Imagen: </label>\n       \n        <input  type=\"file\" onChange={(event) => { setImageUpload(event.target.files[0]);  }}  className='form-control'/>\n        <button  className='btn btn-primary mt-3 form-control' onClick={uploadFile}> Guardar</button>\n        \n      </form>\n  </div>\n     \n          </Container>\n         {imageUrls.map((url) => {\n          return <img src={url} />;\n        })}\n          \n          </div>\n\n\n          <div className=\"App\">\n      <input\n        type=\"file\"\n        onChange={(event) => {\n          setImageUpload(event.target.files[0]);\n        }}\n      />\n      <button onClick={uploadFile}> Upload Image</button>\n      {imageUrls.map((url) => {\n        return <img src={url} />;\n      })}\n    </div>\n\n*/\n\nvar _c;\n\n$RefreshReg$(_c, \"MiPerfil\");","map":{"version":3,"names":["React","Container","Navigation","collection","query","where","getDocs","serverTimestamp","updateDoc","Timestamp","arrayUnion","arrayRemove","getDoc","doc","onSnapshot","useState","useEffect","ref","uploadBytes","getDownloadURL","listAll","list","storage","v4","MiPerfil","imageUpload","setImageUpload","imageUrls","setImageUrls","imagesListRef","uploadFile","imageRef","name","then","snapshot","url","prev","response","items","forEach","item","on","error","downloadURL","db","data","chatId","messages","id","uuid","text","senderId","currentUser","uid","date","now","displayName","img","event","target","files","map"],"sources":["C:/Users/User/Downloads/PWII/PWII-PROYECTOFINAL/PWII-PROYECTOFINAL/PWII/pia-pwii/src/pages/MiPerfil.jsx"],"sourcesContent":["import React from 'react';\nimport Container from 'react-bootstrap/Container';\nimport Navigation from '../Components/NavigationLayout';\nimport './Test.css'\n\nimport { collection, query, where, getDocs, serverTimestamp, updateDoc, Timestamp } from \"firebase/firestore\";\nimport { arrayUnion, arrayRemove, getDoc } from \"firebase/firestore\";\nimport { doc, onSnapshot } from \"firebase/firestore\";\n\nimport { useState, useEffect } from \"react\";\nimport {ref, uploadBytes, getDownloadURL, listAll, list} from \"firebase/storage\";\nimport { storage } from \"../firebase\";\nimport { v4 } from \"uuid\";\n\nconst MiPerfil = () => {\n  const [imageUpload, setImageUpload] = useState(null);\n  const [imageUrls, setImageUrls] = useState([]);\n\n  const imagesListRef = ref(storage, \"images/\");\n  const uploadFile = () => {\n    if (imageUpload == null) return;\n    const imageRef = ref(storage, `images/${imageUpload.name + v4()}`);\n    uploadBytes(imageRef, imageUpload).then((snapshot) => {\n      getDownloadURL(snapshot.ref).then((url) => {\n        setImageUrls((prev) => [...prev, url]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    listAll(imagesListRef).then((response) => {\n      response.items.forEach((item) => {\n        getDownloadURL(item).then((url) => {\n          setImageUrls((prev) => [...prev, url]);\n        });\n      });\n    });\n  }, []);\n\n\n\n  uploadFile.on(\n    (error) => {\n        //TODO:Handle Error\n    },\n    () => {\n        getDownloadURL(uploadFile.snapshot.ref).then(async (downloadURL) => {\n            await updateDoc(doc(db, \"chats\", data.chatId), {\n                messages: arrayUnion({\n                    id: uuid(),\n                  \n                    text: text,\n                    senderId: currentUser.uid,\n                    date: Timestamp.now(),\n                    displayName: currentUser.displayName,\n                    img: downloadURL,\n                }),\n            });\n        });\n    }\n);\n\n\n\n\n\n\n\n\n\n\n\n  return (\n\n    <div>\n    <Navigation />\n    <Container> \n    <div className='card card-body'>\n<h3 className='text-center'>Agregar Productos</h3>\n<form /*onSubmit={uploadFile}*/ >\n<label>Nombre: </label>\n<div className='form-group'>\n    <input type=\"text\" placeholder='Ingresa el nombre del producto' id='nombre' className='form-control mt-1' required />\n</div>\n\n<label>Precio: </label>\n<div className='form-group'>\n    <input type=\"text\" placeholder='Ingresa el precio' id='precio' className='form-control mt-1' required />\n</div>\n<label>Agregar Imagen: </label>\n\n\n\n<input\n        type=\"file\"\n        onChange={(event) => {\n          setImageUpload(event.target.files[0]);\n        }}\n        className='form-control' />\n      <button  className='btn btn-primary mt-3 form-control'onClick={uploadFile}> Upload Image</button>\n\n\n\n   \n</form>\n</div>\n\n</Container>\n{imageUrls.map((url) => {\nreturn <img src={url} />;\n})}\n\n</div>\n\n\n    \n  );\n}\n\nexport default MiPerfil;\n/*\n\n <div>\n              <Navigation />\n              <Container> \n              <div className='card card-body'>\n          <h3 className='text-center'>Agregar Productos</h3>\n          <form /*onSubmit={uploadFile} >\n          <label>Nombre: </label>\n          <div className='form-group'>\n              <input type=\"text\" placeholder='Ingresa el nombre del producto' id='nombre' className='form-control mt-1' required />\n          </div>\n\n          <label>Precio: </label>\n          <div className='form-group'>\n              <input type=\"text\" placeholder='Ingresa el precio' id='precio' className='form-control mt-1' required />\n          </div>\n        <label>Agregar Imagen: </label>\n       \n        <input  type=\"file\" onChange={(event) => { setImageUpload(event.target.files[0]);  }}  className='form-control'/>\n        <button  className='btn btn-primary mt-3 form-control' onClick={uploadFile}> Guardar</button>\n        \n      </form>\n  </div>\n     \n          </Container>\n         {imageUrls.map((url) => {\n          return <img src={url} />;\n        })}\n          \n          </div>\n\n\n          <div className=\"App\">\n      <input\n        type=\"file\"\n        onChange={(event) => {\n          setImageUpload(event.target.files[0]);\n        }}\n      />\n      <button onClick={uploadFile}> Upload Image</button>\n      {imageUrls.map((url) => {\n        return <img src={url} />;\n      })}\n    </div>\n\n*/ "],"mappings":"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"},"metadata":{},"sourceType":"module"}