{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\andre\\\\Downloads\\\\POI-PROYECTOFINAL\\\\POI-PROYECTOFINAL\\\\src\\\\Hooks\\\\UseAuth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useMemo } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useLocalStorage } from \"./UseLocalStorage\";\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { toast as toasty } from 'react-toastify'; //import 'react-toastify/dist/ReactToastify.css';\n// minified version is also included\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useLocalStorage(\"user\", null);\n  const navigate = useNavigate();\n\n  const login = async data => {\n    await fetch('http://localhost:4000/users/validate', {\n      method: 'POST',\n      body: JSON.stringify({\n        email: data.email,\n        password: data.password,\n        userId: Math.random().toString(36).slice(2)\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      }\n    }).then(response => response.json()).then(data => {\n      if (data.status === 200 || data[0].id > -1) {\n        setUser(data);\n        navigate(\"/home/start\", {\n          replace: true\n        });\n      } else {\n        toasty.error('Error: Invalid Credentials', {\n          position: toasty.POSITION.TOP_CENTER\n        });\n      }\n    }).catch(err => {\n      toasty.error('Error: Invalid Credentials', {\n        position: toasty.POSITION.TOP_CENTER\n      });\n      console.log(err.message);\n    });\n  };\n\n  const signup = async data => {\n    await fetch('http://localhost:4000/users/create', {\n      method: 'POST',\n      body: JSON.stringify({\n        email: data.email,\n        password: data.password,\n        name: data.name,\n        lastname: data.lastname,\n        userId: Math.random().toString(36).slice(2)\n      }),\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      }\n    }).then(response => response.json()).then(data => {\n      console.dir(data);\n\n      if (data.status === 200 || data[0].id > -1) {\n        setUser(data);\n        navigate(\"/home/start\", {\n          replace: true\n        });\n      } else {\n        toasty.error('Error: Invalid information', {\n          position: toasty.POSITION.TOP_CENTER\n        });\n      }\n    }).catch(err => {\n      toasty.error('Error: Invalid information', {\n        position: toasty.POSITION.TOP_CENTER\n      });\n      console.log(err.message);\n    });\n  };\n\n  const logout = () => {\n    setUser(null);\n    navigate(\"/\", {\n      replace: true\n    });\n  };\n\n  const value = useMemo(() => ({\n    user,\n    login,\n    logout,\n    signup\n  }), // eslint-disable-next-line react-hooks/exhaustive-deps\n  [user]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 10\n  }, this);\n};\n\n_s(AuthProvider, \"XAy98q+SfqDvN9TiTUjXqykJDLs=\", false, function () {\n  return [useLocalStorage, useNavigate];\n});\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useMemo","useNavigate","useLocalStorage","toast","toasty","AuthContext","AuthProvider","children","user","setUser","navigate","login","data","fetch","method","body","JSON","stringify","email","password","userId","Math","random","toString","slice","headers","then","response","json","status","id","replace","error","position","POSITION","TOP_CENTER","catch","err","console","log","message","signup","name","lastname","dir","logout","value","useAuth"],"sources":["C:/Users/andre/Downloads/POI-PROYECTOFINAL/POI-PROYECTOFINAL/src/Hooks/UseAuth.js"],"sourcesContent":["import { createContext, useContext, useMemo } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useLocalStorage } from \"./UseLocalStorage\";\nimport 'react-toastify/dist/ReactToastify.min.css';\nimport { toast as toasty } from 'react-toastify';\n//import 'react-toastify/dist/ReactToastify.css';\n// minified version is also included\n\nconst AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useLocalStorage(\"user\", null);\n  const navigate = useNavigate();\n\n  const login = async (data) => {\n    await fetch('http://localhost:4000/users/validate', {\n      method: 'POST',\n      body: JSON.stringify({\n         email: data.email,\n         password: data.password,\n         userId: Math.random().toString(36).slice(2),\n      }),\n      headers: {\n         'Content-type': 'application/json; charset=UTF-8',\n      },\n   })\n      .then((response) => response.json())\n      .then((data) => {\n        if (data.status === 200 || data[0].id > -1){\n          setUser(data);\n          navigate(\"/home/start\", { replace: true });  \n        } else {\n          toasty.error('Error: Invalid Credentials',{\n            position: toasty.POSITION.TOP_CENTER\n          });\n      }})\n      .catch((err) => {\n        toasty.error('Error: Invalid Credentials',{\n          position: toasty.POSITION.TOP_CENTER\n        });\n       console.log(err.message);\n      });\n  };\n\n  const signup = async (data) => {\n    await fetch('http://localhost:4000/users/create', {\n      method: 'POST',\n      body: JSON.stringify({\n         email: data.email,\n         password: data.password,\n         name: data.name,\n         lastname: data.lastname,\n         userId: Math.random().toString(36).slice(2),\n      }),\n      headers: {\n         'Content-type': 'application/json; charset=UTF-8',\n      },\n   })\n      .then((response) => response.json())\n      .then((data) => {\n        console.dir(data);\n        if (data.status === 200 || data[0].id > -1){\n          setUser(data);\n          navigate(\"/home/start\", { replace: true });  \n        } else {\n          toasty.error('Error: Invalid information',{\n            position: toasty.POSITION.TOP_CENTER\n          });\n      }})\n      .catch((err) => {\n        toasty.error('Error: Invalid information',{\n          position: toasty.POSITION.TOP_CENTER\n        });\n       console.log(err.message);\n      });\n  };\n\n  const logout = () => {\n    setUser(null);\n    navigate(\"/\", { replace: true });\n  };\n\n  const value = useMemo(\n    () => ({\n      user,\n      login,\n      logout,\n      signup\n    }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [user]\n  );\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}