{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Downloads\\\\POI_Tims\\\\POI-PROYECTOFINAL\\\\POI-PROYECTOFINAL\\\\src\\\\pages\\\\MiPerfil.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport './Test.css';\nimport { doc, onSnapshot } from \"firebase/firestore\";\nimport { getFirestore, collection, updateDoc } from \"firebase/firestore\";\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { async } from '@firebase/util';\nimport { db } from \"../firebase\";\nimport { storage } from '../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MiPerfil = () => {\n  _s();\n\n  const [file, setFile] = useState(null);\n  const [img, setImg] = useState(null);\n  let urlImDesc;\n\n  const guardarProductos = async e => {\n    e.preventDefault();\n    const nombre = e.target.nombre.value;\n    const precio = e.target.precio.value;\n    const newProduct = {\n      nombre: nombre,\n      precio: precio,\n      imagen: urlImDesc\n    };\n    const storageRef = ref(storage, uuid());\n    const uploadTask = uploadBytesResumable(storageRef, img);\n    uploadTask.on(error => {//TODO:Handle Error\n    }, () => {\n      getDownloadURL(uploadTask.snapshot.ref).then(async downloadURL => {\n        await updateDoc(doc(db, \"productos\"), {\n          messages: arrayUnion({\n            newProduct\n          })\n        });\n      });\n    });\n    e.target.nombre.value = '';\n    e.target.precio.value = '';\n    e.target.file.value = '';\n  };\n\n  const fileHandler = async e => {\n    const archivoI = e.target.files[0];\n    const refArchivo = ref(storage, `documentos/${archivoI.name}`);\n    await uploadBytes(refArchivo, archivoI);\n    urlImDesc = await getDownloadURL(refArchivo);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card card-body\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-center\",\n      children: \"Agregar Productos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: guardarProductos,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Nombre: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Ingresa el nombre del producto\",\n          id: \"nombre\",\n          className: \"form-control mt-1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Precio: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Ingresa el precio\",\n          id: \"precio\",\n          className: \"form-control mt-1\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Agregar Imagen: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        placeholder: \"Agregar imagen\",\n        id: \"file\",\n        className: \"form-control\",\n        onChange: fileHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary mt-3 form-control\",\n        children: \"Guardar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 7\n  }, this);\n};\n\n_s(MiPerfil, \"Hp4u7BLTKQq3NKJrF6szKsQ3KmY=\");\n\n_c = MiPerfil;\nexport default MiPerfil;\n\nvar _c;\n\n$RefreshReg$(_c, \"MiPerfil\");","map":{"version":3,"names":["React","doc","onSnapshot","getFirestore","collection","updateDoc","getStorage","ref","uploadBytes","getDownloadURL","async","db","storage","MiPerfil","file","setFile","useState","img","setImg","urlImDesc","guardarProductos","e","preventDefault","nombre","target","value","precio","newProduct","imagen","storageRef","uuid","uploadTask","uploadBytesResumable","on","error","snapshot","then","downloadURL","messages","arrayUnion","fileHandler","archivoI","files","refArchivo","name"],"sources":["C:/Users/User/Downloads/POI_Tims/POI-PROYECTOFINAL/POI-PROYECTOFINAL/src/pages/MiPerfil.jsx"],"sourcesContent":["import React from 'react';\n\nimport './Test.css'\nimport { doc, onSnapshot } from \"firebase/firestore\";\nimport { getFirestore, collection, updateDoc } from \"firebase/firestore\";\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { async } from '@firebase/util';\nimport { db } from \"../firebase\";\nimport {storage } from '../firebase';\n\n\nconst MiPerfil = () => {\n  const [file, setFile] = useState(null);\n  const [img, setImg] = useState(null);\n  let urlImDesc;\n\n    const guardarProductos = async(e)=>{\n      e.preventDefault()\n      const nombre = e.target.nombre.value;\n      const precio = e.target.precio.value;\n\n      const newProduct = {\n        nombre: nombre,\n        precio: precio,\n        imagen: urlImDesc\n      }\n\n      const storageRef = ref(storage, uuid());\n\n            const uploadTask = uploadBytesResumable(storageRef, img);\n\n            uploadTask.on(\n                (error) => {\n                    //TODO:Handle Error\n                },\n                () => {\n                    getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n                        await updateDoc(doc(db, \"productos\"), {\n                            messages: arrayUnion({\n                                 newProduct\n                            }),\n                        });\n                    });\n                }\n            );\n\n\n      e.target.nombre.value='';\n      e.target.precio.value='';\n      e.target.file.value='';\n  \n    }\n\n    const fileHandler = async(e)=>{\n      const archivoI = e.target.files[0];\n      const refArchivo = ref(storage, `documentos/${archivoI.name}`)\n      await uploadBytes(refArchivo, archivoI)\n\n      urlImDesc = await getDownloadURL(refArchivo)\n    }\n    \n    \n\n    return(\n      <div className='card card-body'>\n          <h3 className='text-center'>Agregar Productos</h3>\n          <form onSubmit={guardarProductos}>\n            <label>Nombre: </label>\n              <div className='form-group'>\n                  <input type=\"text\" placeholder='Ingresa el nombre del producto' id='nombre' className='form-control mt-1' required />\n              </div>\n\n              <label>Precio: </label>\n              <div className='form-group'>\n                  <input type=\"text\" placeholder='Ingresa el precio' id='precio' className='form-control mt-1' required />\n              </div>\n            <label>Agregar Imagen: </label>\n            <input type=\"file\" placeholder='Agregar imagen' id='file' className='form-control' onChange={fileHandler} />\n\n            <button className='btn btn-primary mt-3 form-control'>Guardar</button>\n          </form>\n      </div>\n    )\n}\n\nexport default MiPerfil;"],"mappings":"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"},"metadata":{},"sourceType":"module"}